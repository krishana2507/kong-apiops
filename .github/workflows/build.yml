# This is a basic workflow to help you get started with Actions

name: Build

on:
  workflow_dispatch:
  
jobs:
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v2

      - name: Install Deck
        run: |
          curl -sL https://github.com/kong/deck/releases/download/v1.34.0/deck_1.34.0_linux_amd64.tar.gz -o deck.tar.gz
          tar -xf deck.tar.gz -C /tmp
          sudo cp /tmp/deck /usr/local/bin/
          deck version
          
      - name: Install Insomnia
        run: |
          curl -sL https://packages.konghq.com/public/insomnia/setup.deb.sh | sudo -E distro=ubuntu codename=focal bash
          sudo apt-get update
          sudo apt-get install insomnia  
          
      - name: Lint OAS spec
        run: inso lint spec ./kong-config/spec.yaml    

